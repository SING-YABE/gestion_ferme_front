
<!-- TEMPLATE HTML -->
<div class="h-full sidebar-container text-black flex flex-column">

  <!-- Header -->
  <div class="sidebar-header flex align-items-center justify-content-between px-4">
    <div class="flex align-items-center gap-3">
      <h1 class="m-0 app-logo">{{ appName.toUpperCase() }}</h1>
      <div class="version-badge">{{ appVersion }}</div>
    </div>
  </div>

  <!-- Menu Content -->
  <div class="h-full">
    <div style="height: calc(100% - 60px);" class="overflow-x-hidden overflow-y-auto scroll-hidden">

      <ul id="app-menu">
        <ng-container *ngFor="let menuItem of menuService.mainMenu; trackBy: trackByFn">
          <li>
            <ng-container>
              <ng-container *ngIf="menuItem.children && menuItem.children.length > 0; else singleMenu">
                <app-accordion-menu [menuItem]="menuItem"></app-accordion-menu>
              </ng-container>
              <ng-template #singleMenu>
                @if (menuItem.permission !== undefined) {
                <a *appHasPermission="[menuItem.permission]" [routerLink]="menuItem.routerLink"
                  routerLinkActive="active" [routerLinkActiveOptions]="{exact: menuItem.exact ?? false}">
                  <fa-icon *ngIf="menuItem.icon" [icon]="menuItem.icon"></fa-icon>
                  <span class="side-title">{{ menuItem.title }}</span>
                </a>
                } @else {
                <a [routerLink]="menuItem.routerLink" routerLinkActive="active"
                  [routerLinkActiveOptions]="{exact: menuItem.exact ?? false}">
                  <fa-icon *ngIf="menuItem.icon" [icon]="menuItem.icon"></fa-icon>
                  <span class="side-title">{{ menuItem.title }}</span>
                </a>
                }
              </ng-template>
            </ng-container>
          </li>
        </ng-container>
      </ul>
    </div>

    <!-- User Button -->
    <div class="px-4 py-3">
      <button 
        (click)="menu.toggle($event)" 
        pButton 
        class="w-full custom-user-btn"
        icon="pi pi-user">
      </button>
    </div>
  </div>
</div>

<p-menu [popup]="true" appendTo="body" #menu [model]="menuItems"></p-menu>
<p-confirmDialog appendTo="body"></p-confirmDialog>