<div class="odyssey-shadow-low border-round" style="background:#F5F0E6; border:1px solid #D9D2C2;">
    
    <div class="px-4 py-2 flex gap-3 align-items-center"
        style="background:#16A34A; color:white; border-radius:8px 8px 0 0;">
        <div class="flex-1">
            <h5 class="m-0">Liste des ventes</h5>
        </div>
        <div>
            <app-ventes-form (onUpdate)="loadData()"></app-ventes-form>
        </div>
    </div>

    <div>
        <p-table [value]="ventes" [loading]="loading" [rows]="pageSize" [rowsPerPageOptions]="[5,10,20]"
            [paginator]="ventes.length > pageSize">

            <ng-template pTemplate="header">
                <tr style="background:#DCFCE7;">
                    <th>Date</th>
                    <th>Type</th>
                    <th>Quantité</th>
                    <th>Poids Total (kg)</th>
                    <th>Prix Unitaire</th>
                    <th>Montant Total</th>
                    <th>Client</th>
                    <th style="text-align:center; width:150px;">Actions</th>
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-v>
                <tr>
                    <td>{{ v.dateVente }}</td>
                    <td>{{ v.type }}</td>
                    <td>{{ v.quantite }}</td>
                    <td>{{ v.poidsTotal }}</td>
                    <td>{{ v.prixUnitaire }}</td>
                    <td>{{ v.montantTotal }}</td>
                    <td>{{ v.client }}</td>

                    <td class="text-center">
                        <div class="flex gap-2 justify-content-center">
                            <app-ventes-form [target]="v" mode="edit" (onUpdate)="loadData()"></app-ventes-form>

                            <button pButton class="p-button-rounded"
                                icon="pi pi-trash"
                                style="background:#B91C1C; border-color:#B91C1C;"
                                (click)="confirmDelete(v)">
                            </button>
                        </div>
                    </td>
                </tr>
            </ng-template>

            <ng-template pTemplate="emptymessage">
                <tr>
                    <td colspan="8" class="text-center py-4">
                        <i class="pi pi-inbox mr-2"></i> Aucune vente trouvée
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>

<p-confirmDialog [style]="{width:'450px'}"></p-confirmDialog>
