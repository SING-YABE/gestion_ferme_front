<button (click)="handleShow()" pButton class="p-button-success" *ngIf="mode == 'create'" label="Nouvel Animal"
  icon="pi pi-plus">
</button>

<button (click)="handleShow()" pButton *ngIf="mode == 'edit'" icon="pi pi-pencil" class="p-button-rounded"
  style="background:#16A34A; border-color:#16A34A; color:white;">
</button>

<p-dialog [header]="dialogHeader" appendTo="body" [modal]="true" [style]="{width: '700px'}" [(visible)]="showForm"
  [baseZIndex]="9000" styleClass="farm-dialog" [draggable]="false" [resizable]="false">
  
  <div>
    <form id="animalForm" [formGroup]="animalForm" (ngSubmit)="handleSubmit()">
      
      <!-- Type d'Animal -->
      <div class="field mb-4">
        <label for="typeAnimalId" class="block font-semibold mb-2" style="font-size: 14px;">
          Type d'Animal <span style="color: red;">*</span>
        </label>
        <p-dropdown id="typeAnimalId" formControlName="typeAnimalId" [options]="typesAnimaux" optionLabel="nom"
          optionValue="id" placeholder="Sélectionnez un type" styleClass="w-full" [showClear]="false"
          [style]="{'height': '45px'}">
        </p-dropdown>
      </div>

      <!-- Date d'Entrée -->
      <div class="field mb-4">
        <label class="block font-semibold mb-2" style="font-size: 14px;">
          Date d'Entrée <span style="color: red;">*</span>
        </label>
        <p-calendar formControlName="dateEntree" dateFormat="dd/mm/yy" [showIcon]="true"
          appendTo="body" inputId="dateEntree" styleClass="w-full"
          [inputStyle]="{'height': '45px'}">
        </p-calendar>
      </div>

      <!-- Poids Initial et État de Santé -->
      <div class="grid mb-4">
        <div class="col-6">
          <label for="poidsInitial" class="block font-semibold mb-2" style="font-size: 14px;">
            Poids Initial (kg) <span style="color: red;">*</span>
          </label>
          <input id="poidsInitial" type="number" step="0.1" min="0" placeholder="ex: 120"
            formControlName="poidsInitial" pInputText class="w-full" 
            style="height: 45px; font-size: 14px;" />
        </div>

        <div class="col-6">
          <label for="etatSanteId" class="block font-semibold mb-2" style="font-size: 14px;">
            État de Santé <span style="color: red;">*</span>
          </label>
          <p-dropdown id="etatSanteId" formControlName="etatSanteId" [options]="etatsSante" 
            optionLabel="description" optionValue="id" placeholder="Sélectionnez un état" 
            styleClass="w-full" [showClear]="false" [style]="{'height': '45px'}">
          </p-dropdown>
        </div>
      </div>

      <!-- Bâtiment -->
      <div class="field mb-4">
        <label for="batimentId" class="block font-semibold mb-2" style="font-size: 14px;">
          Bâtiment <span style="color: red;">*</span>
        </label>
        <p-dropdown id="batimentId" formControlName="batimentId" [options]="batiments" optionLabel="nom"
          optionValue="id" placeholder="Sélectionnez un bâtiment" styleClass="w-full" [showClear]="false"
          [style]="{'height': '45px'}">
          <ng-template let-batiment pTemplate="item">
            <div>
              <strong>{{ batiment.nom }}</strong>
              <div class="text-sm text-color-secondary">{{ batiment.localisation }}</div>
            </div>
          </ng-template>
        </p-dropdown>
      </div>

      <!-- Observations -->
      <div class="field mb-3">
        <label for="observations" class="block font-semibold mb-2" style="font-size: 14px;">
          Observations
        </label>
        <textarea id="observations" rows="3" placeholder="Observations sur l'animal..."
          formControlName="observations" pInputTextarea class="w-full" 
          style="font-size: 14px; padding: 10px;">
        </textarea>
      </div>

    </form>
  </div>

  <ng-template pTemplate="footer">
    <div class="flex gap-3 w-full">
      <button type="submit" [disabled]="animalForm.invalid" form="animalForm" [loading]="processing" pButton
        label="Enregistrer" class="p-button-success flex-1" 
        style="height: 45px; font-size: 14px; font-weight: 500;">
      </button>

      <button (click)="showForm = false" pButton label="Annuler" class="p-button-outlined"
        style="color:#8B5E3C; border-color:#8B5E3C; height: 45px; font-size: 14px; font-weight: 500; min-width: 140px;">
      </button>
    </div>
  </ng-template>
</p-dialog>