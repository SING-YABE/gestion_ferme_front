<div 
  class="odyssey-shadow-low border-round" 
  style="background:#F5F0E6; border:1px solid #D9D2C2;"
>
  <div class="px-4 py-2 flex gap-3 align-items-center"
       style="background:#2E7D32; color:white; border-radius:8px 8px 0 0;">
    
    <h5 class="m-0 flex-1">Gestion des charges diverses</h5>

    <app-chargesdiverses-form 
      mode="create"
      (onUpdate)="loadData()"
    ></app-chargesdiverses-form>
  </div>


  <p-table
    [value]="data"
    [loading]="loading"
    [rows]="pageSize"
    [paginator]="data.length > pageSize"
    styleClass="p-datatable-sm"
  >
    <ng-template pTemplate="header">
      <tr style="background:#DCFCE7;">
        <th>Date</th>
        <th>Description</th>
        <th>Montant</th>
        <th>Mode de paiement</th>
        <th style="text-align:center; width:150px">Actions</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-row>
      <tr>
        <td>{{ row.date }}</td>
        <td>{{ row.description }}</td>
        <td><strong>{{ row.montant }} FCFA</strong></td>
        <td>{{ row.modePaiement }}</td>
        <td>
          <div class="flex justify-content-center gap-2">
            
            <app-chargesdiverses-form
              [target]="row"
              mode="edit"
              (onUpdate)="loadData()"
            ></app-chargesdiverses-form>

            <button pButton 
                    icon="pi pi-trash" 
                    class="p-button-rounded"
                    style="background:#B91C1C; border-color:#B91C1C;"
                    (click)="confirmDelete(row)">
            </button>
          </div>
        </td>
      </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="5" class="text-center py-4">
          <i class="pi pi-inbox mr-2"></i> Aucune charge trouv√©e
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<p-confirmDialog></p-confirmDialog>
