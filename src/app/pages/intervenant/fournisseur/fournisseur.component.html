<div class="odyssey-shadow-low border-round" style="background:#F5F0E6; border:1px solid #D9D2C2;">
  <div class="px-4 py-2 flex gap-3 align-items-center" style="background:#2E7D32; color:white; border-radius:8px 8px 0 0;">
    <div class="flex-1">
      <h5 class="m-0">Gestion des fournisseurs</h5>
    </div>
    <div>
      <app-fournisseur-form (onUpdate)="loadData()" mode="create"></app-fournisseur-form>
    </div>
  </div>

  <p-table [value]="fournisseurs" [loading]="loading" [rows]="pageSize"
           [rowsPerPageOptions]="[5,10,30,40]" [paginator]="fournisseurs.length > pageSize"
           styleClass="p-datatable-sm">
    <ng-template pTemplate="header">
      <tr style="background:#DCFCE7;">
        <th pSortableColumn="nom">Nom <p-sortIcon field="nom"></p-sortIcon></th>
        <th pSortableColumn="contact">Contact <p-sortIcon field="contact"></p-sortIcon></th>
        <th style="width:150px; text-align:center;">Actions</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-fournisseur>
      <tr>
        <td>{{ fournisseur.nom }}</td>
        <td>{{ fournisseur.contact || 'Non renseigné' }}</td>
        <td>
          <div class="flex gap-2 justify-content-center">
            <app-fournisseur-form [target]="fournisseur" mode="edit" (onUpdate)="loadData()"></app-fournisseur-form>
            <button pButton icon="pi pi-trash" class="p-button-rounded"
                    style="background:#B91C1C; border-color:#B91C1C;"
                    (click)="confirmDelete(fournisseur)">
            </button>
          </div>
        </td>
      </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="3" class="text-center py-4">
          <i class="pi pi-inbox mr-2"></i>
          Aucun fournisseur trouvé
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<p-confirmDialog [style]="{width:'450px'}"></p-confirmDialog>
